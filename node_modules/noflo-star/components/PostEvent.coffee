noflo = require 'noflo'

class PostEvent extends noflo.Component
  constructor: ->
    @from = null
    @to = null

    @inPorts =
      from: new noflo.Port
      to: new noflo.Port
    @outPorts =
      out: new noflo.Port
      error: new noflo.Port

    @inPorts.from.on 'data', (data) =>
      @from = data
      do @post if @to

    @inPorts.to.on 'data', (data) =>
      @to = data
      do @post if @from

  post: ->
      @outPorts.out.send @to
      @outPorts.out.disconnect()

exports.getComponent = -> new PostEvent